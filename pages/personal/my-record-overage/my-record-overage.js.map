{"version":3,"file":"pages/personal/my-record-overage/my-record-overage.js","sources":["webpack:///._src_pages_personal_my-record-overage_my-record-overage.tsx","webpack:///._src_pages_personal_my-record-overage_my-record-overage.module.scss","webpack:///./src/pages/personal/my-record-overage/my-record-overage.tsx?c5b5"],"sourcesContent":["/*\r\n * @Description: 余额流水记录\r\n * @Date: 2021-08-24 11:37:08\r\n * @LastEditTime: 2021-08-30 11:20:47\r\n */\r\nimport { View, ScrollView, Image } from '@tarojs/components';\r\nimport React, { useEffect, useState } from 'react';\r\nimport Taro from '@tarojs/taro';\r\nimport Loading from '@/components/loading/loading';\r\nimport { timeStream } from '@/utils/tools';\r\nimport style from './my-record-overage.module.scss';\r\nimport { IMyRecordOverage } from '@/api/personal_center/personal_center.i';\r\nimport { api_find_balance_account_flows } from '@/api/personal_center/personal_center';\r\nimport Empty from '@/components/empty/empty';\r\nimport LoadMore from '@/components/load-more/load-more';\r\n\r\nconst MyRecordOverage = () => {\r\n  const [loading, setLoading] = useState<boolean>(true);\r\n  let [offest, setOffest] = useState<number>(0);\r\n  const [is_last_page, setIsLastPage] = useState<boolean>(false);\r\n  const [is_load_interface, setIsLoadInterface] = useState<boolean>(false);\r\n  const [account_flows, setAccountFlows] = useState<IMyRecordOverage.AccountFlow[]>([]);\r\n\r\n  useEffect(() => {\r\n    getFindBalanceFlows();\r\n  }, []);\r\n\r\n  const getFindBalanceFlows = async () => {\r\n    try {\r\n      const res = await api_find_balance_account_flows(offest);\r\n      if (res) {\r\n        setAccountFlows([...account_flows, ...res.account_flows]);\r\n        setIsLastPage(res.is_last_page);\r\n        setIsLoadInterface(false);\r\n        setLoading(false);\r\n      }\r\n    } catch (error) {\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  // 加载下一页数据\r\n  const nextDataPage = () => {\r\n    if (is_load_interface || is_last_page) return;\r\n\r\n    offest = offest + 20;\r\n    setOffest(offest);\r\n    setIsLoadInterface(true);\r\n    getFindBalanceFlows();\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <View className={style.top_line}></View>\r\n      {loading ? (\r\n        <Loading></Loading>\r\n      ) : (\r\n        <ScrollView className={style.scroll_view_container} scrollY onScrollToLower={nextDataPage}>\r\n          <View className={style.unit_record_container}>\r\n            {account_flows.length ? (\r\n              <>\r\n                {account_flows.map((item, index) => {\r\n                  return (\r\n                    <View className={`${style.item_content} ${style.flex}`} key={index}>\r\n                      <View className={style.flex}>\r\n                        <Image\r\n                          className={style.item_icon}\r\n                          src=\"https://static-1253442168.file.myqcloud.com/xupload/20210726_tixian.png\"></Image>\r\n                        <View>\r\n                          <View className={style.item_title}>{item.abstract}</View>\r\n                          {item.title && <View className={style.item_subtitle}>{item.title}</View>}\r\n                          <View className={style.item_date}>{timeStream(item.create_ts * 1000)}</View>\r\n                        </View>\r\n                      </View>\r\n                      <View className={style.point}>{(item.account_change_type === 1 ? '+' : '-') + item.cash_amount / 100 + '元'}</View>\r\n                    </View>\r\n                  );\r\n                })}\r\n                <View className={style.bottom_line}>\r\n                  <LoadMore is_last_page={is_last_page} />\r\n                </View>\r\n              </>\r\n            ) : (\r\n              <Empty />\r\n            )}\r\n          </View>\r\n        </ScrollView>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default MyRecordOverage;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"unit_record_container\":\"unit_record_container--3L3Rv\",\"top_line\":\"top_line--3tEO2\",\"item_icon\":\"item_icon--kS15I\",\"item_content\":\"item_content--4q2qo\",\"item_title\":\"item_title--2tQ5c\",\"item_subtitle\":\"item_subtitle--uEAc9\",\"item_date\":\"item_date--3KNrR\",\"scroll_view_container\":\"scroll_view_container--3A0IV\",\"point\":\"point--3SAc2\",\"bottom_line\":\"bottom_line--3rygU\",\"flex\":\"flex--3GzUr\"};","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"../../../../node_modules/babel-loader/lib/index.js!./my-record-overage.tsx\"\nvar config = {\"navigationBarTitleText\":\"余额流水记录\"};\n\n\nvar inst = Page(createPageConfig(component, 'pages/personal/my-record-overage/my-record-overage', {root:{cn:[]}}, config || {}))\n\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;;;;;AAEA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AADA;AACA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AATA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAXA;AACA;AACA;AAwBA;AACA;AAEA;AACA;AACA;AACA;AANA;AACA;AAQA;AACA;AACA;AAAA;AAIA;AAAA;AAAA;AAAA;AACA;AAAA;AAEA;AAEA;AACA;AAAA;AACA;AAAA;AAEA;AACA;AAFA;AAGA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAHA;AAJA;AAUA;AAAA;AAAA;AAXA;AAHA;AAkBA;AAAA;AACA;AAAA;AADA;AAlBA;AAFA;AADA;AALA;AApCA;AACA;AA2EA;;;;;;;;;;;;AC5FA;AACA;;;;;;;;;;;;;ACDA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;A","sourceRoot":""}